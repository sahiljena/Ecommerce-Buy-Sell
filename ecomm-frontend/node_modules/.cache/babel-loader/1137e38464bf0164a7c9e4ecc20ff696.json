{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useState,useEffect}from'react';import{Buffer}from'buffer';// console.log(dtoken);\nexport default function useToken(){var getToken=function getToken(){var tokenString=localStorage.getItem('token');var userToken=JSON.parse(tokenString);return userToken===null||userToken===void 0?void 0:userToken.token;};var _useState=useState(getToken()),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var saveToken=function saveToken(userToken){localStorage.setItem('token',JSON.stringify(userToken));setToken(userToken.token);};var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var getUser=function getUser(){if(token){var str=token.split('.')[1];var buff=new Buffer(str,'base64');var base64ToStringNew=JSON.parse(buff.toString('ascii'));return base64ToStringNew;}return;};useEffect(function(){setUserName(getUser());},[token]);return{setToken:saveToken,token:token,userName:userName};}","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Desktop/olx-clone/ecomm-frontend/src/components/useToken.js"],"names":["useState","useEffect","Buffer","useToken","getToken","tokenString","localStorage","getItem","userToken","JSON","parse","token","setToken","saveToken","setItem","stringify","userName","setUserName","getUser","str","split","buff","base64ToStringNew","toString"],"mappings":"yJAAA,OAASA,QAAT,CAAkBC,SAAlB,KAAmC,OAAnC,CACA,OAAQC,MAAR,KAAqB,QAArB,CACE;AAEF,cAAe,SAASC,CAAAA,QAAT,EAAoB,CACjC,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMC,CAAAA,WAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAApB,CACA,GAAMC,CAAAA,SAAS,CAAGC,IAAI,CAACC,KAAL,CAAWL,WAAX,CAAlB,CACA,MAAOG,CAAAA,SAAP,SAAOA,SAAP,iBAAOA,SAAS,CAAEG,KAAlB,CACD,CAJD,CAMA,cAA0BX,QAAQ,CAACI,QAAQ,EAAT,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAL,SAAS,CAAI,CAC7BF,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAA8BL,IAAI,CAACM,SAAL,CAAeP,SAAf,CAA9B,EACAI,QAAQ,CAACJ,SAAS,CAACG,KAAX,CAAR,CACD,CAHD,CAMA,eAAgCX,QAAQ,EAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAK,CACnB,GAAGP,KAAH,CAAS,CACP,GAAIQ,CAAAA,GAAG,CAAGR,KAAK,CAACS,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAV,CACA,GAAIC,CAAAA,IAAI,CAAG,GAAInB,CAAAA,MAAJ,CAAWiB,GAAX,CAAgB,QAAhB,CAAX,CACA,GAAIG,CAAAA,iBAAiB,CAAGb,IAAI,CAACC,KAAL,CAAWW,IAAI,CAACE,QAAL,CAAc,OAAd,CAAX,CAAxB,CACA,MAAOD,CAAAA,iBAAP,CACD,CACD,OACD,CARD,CAUArB,SAAS,CAAC,UAAM,CACZgB,WAAW,CAACC,OAAO,EAAR,CAAX,CACH,CAFQ,CAEN,CAACP,KAAD,CAFM,CAAT,CAKA,MAAO,CACLC,QAAQ,CAAEC,SADL,CAELF,KAAK,CAALA,KAFK,CAGLK,QAAQ,CAARA,QAHK,CAAP,CAKD","sourcesContent":["import { useState,useEffect } from 'react';\r\nimport {Buffer} from 'buffer';\r\n  // console.log(dtoken);\r\n\r\nexport default function useToken() {\r\n  const getToken = () => {\r\n    const tokenString = localStorage.getItem('token');\r\n    const userToken = JSON.parse(tokenString);\r\n    return userToken?.token\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n  \r\n\r\n  const saveToken = userToken => {\r\n    localStorage.setItem('token', JSON.stringify(userToken));\r\n    setToken(userToken.token);\r\n  };\r\n\r\n\r\n  const [userName, setUserName] = useState();\r\n\r\n  const getUser = () =>{\r\n    if(token){\r\n      let str = token.split('.')[1];\r\n      let buff = new Buffer(str, 'base64');\r\n      let base64ToStringNew = JSON.parse(buff.toString('ascii'));\r\n      return base64ToStringNew;\r\n    }\r\n    return;\r\n  }\r\n\r\n  useEffect(() => {\r\n      setUserName(getUser());\r\n  }, [token]);\r\n\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token,\r\n    userName,\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}