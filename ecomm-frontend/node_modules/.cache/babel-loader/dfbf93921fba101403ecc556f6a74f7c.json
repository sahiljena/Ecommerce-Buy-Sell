{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from\"react-router-dom\";import Navbar from'../components/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var token=_ref.token,setToken=_ref.setToken;var navigate=useNavigate();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var LoginStatusMessage=function LoginStatusMessage(props){if(status===401){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-200 text-sm text-blue-500 rounded px-1 py-1\",children:[errorMessage,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-black text-xs\",children:[\"To register click \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"text-blue-600\",children:\"here \"})]})]});}if(errorMessage){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-300 text-xs text-white rounded px-1 py-1\",children:errorMessage});}else{return/*#__PURE__*/_jsx(_Fragment,{});}};var handleLogin=function handleLogin(event){event.preventDefault();setLoading(true);setErrorMessage(\"\");setStatus(\"\");if(email&&password){fetch('http://localhost:5000/api/user/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(function(response){setLoading(false);setStatus(response.status);return response.json();})//Then with the data from the response in JSON...\n.then(function(data){setToken(data);if(data.message===\"Passwords does not match\"){setErrorMessage(\"Wrong username or password\");return false;}if(data.message===\"Email not found\"){setErrorMessage(\"You are not yet registered with us.\");setStatus(401);return false;}console.log('Success:',data);return navigate('/');})//Then with the error genereted...\n.catch(function(error){setErrorMessage(\"Something Went wrong\");console.error('Error:',error);});}else{setLoading(false);setErrorMessage(\"Something Went wrong\");console.log(\"Something wrong !!\");}};if(token){navigate('/');}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{token:token}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-10\",children:/*#__PURE__*/_jsx(\"div\",{class:\"w-full max-w-xs\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-center text-lg font-bold text-gray-600\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(LoginStatusMessage,{status:status})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-bold tracking-tight text-gray-500 mb-2\",for:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",id:\"email\",type:\"email\",placeholder:\"name@example.com\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-bold tracking-tight text-gray-500 mb-2\",for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",id:\"password\",type:\"password\",placeholder:\"******************\",value:password,onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full \".concat(loading?'bg-gray-300':'bg-blue-500 hover:bg-blue-700',\"  text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"),type:\"submit\",children:loading?/*#__PURE__*/_jsx(_Fragment,{children:\"Signing in...\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"Sign In\"})})})]})})})]});};export default Login;","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Desktop/olx-clone/ecomm-frontend/src/pages/Login.js"],"names":["React","useState","useNavigate","Navbar","Login","token","setToken","navigate","status","setStatus","email","setEmail","password","setPassword","errorMessage","setErrorMessage","loading","setLoading","LoginStatusMessage","props","handleLogin","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","json","data","message","console","log","catch","error","e","target","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from '../components/Navbar';\r\nconst Login = ({token, setToken}) => {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [status, setStatus] = useState(0);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const LoginStatusMessage = (props) =>{\r\n        if(status===401){\r\n            return <div className='bg-blue-200 text-sm text-blue-500 rounded px-1 py-1'>\r\n                {errorMessage}<br />\r\n                <span className=\"text-black text-xs\">To register click <a href='/register' className='text-blue-600'>here </a></span>\r\n            </div>\r\n        }\r\n        if(errorMessage){\r\n            return <div className='bg-red-300 text-xs text-white rounded px-1 py-1'>\r\n                {errorMessage}\r\n            </div>\r\n        }\r\n        else{\r\n            return <></>\r\n        }\r\n    }\r\n\r\n    const handleLogin = (event) =>{\r\n        event.preventDefault();\r\n        setLoading(true);\r\n        setErrorMessage(\"\");\r\n        setStatus(\"\");\r\n        if(email && password){\r\n            fetch('http://localhost:5000/api/user/login',{\r\n                method: 'POST',\r\n                headers: {\r\n                'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    email:email,\r\n                    password:password,\r\n                })\r\n            })\r\n            .then(function (response) {\r\n                setLoading(false);\r\n                setStatus(response.status)\r\n                return response.json();\r\n            })\r\n            //Then with the data from the response in JSON...\r\n            .then((data) => {\r\n                setToken(data);\r\n                if(data.message===\"Passwords does not match\"){\r\n                    setErrorMessage(\"Wrong username or password\")\r\n                    return false\r\n                }\r\n                if(data.message===\"Email not found\"){\r\n                    setErrorMessage(\"You are not yet registered with us.\")\r\n                    setStatus(401)\r\n                    return false\r\n                }\r\n                console.log('Success:', data);\r\n                return navigate('/');\r\n            })\r\n            //Then with the error genereted...\r\n            .catch((error) => {\r\n                setErrorMessage(\"Something Went wrong\");\r\n                console.error('Error:', error);\r\n            });\r\n\r\n        }else{\r\n            setLoading(false);\r\n            setErrorMessage(\"Something Went wrong\");\r\n            console.log(\"Something wrong !!\");\r\n        }\r\n    }\r\n\r\n    if(token){\r\n        navigate('/');\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Navbar token={token} />\r\n            <div className='flex justify-center mt-10'>\r\n                <div class=\"w-full max-w-xs\">\r\n                    <form onSubmit={handleLogin} className=\"bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4\">\r\n                        <div className='mb-4 text-center text-lg font-bold text-gray-600'>\r\n                            <h2>Sign In</h2>\r\n                        </div>\r\n                        <div className='mb-4'>\r\n                            <LoginStatusMessage status={status}/>\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"email\">\r\n                                Email\r\n                            </label>\r\n                            <input \r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" \r\n                                id=\"email\" \r\n                                type=\"email\" \r\n                                placeholder=\"name@example.com\"\r\n                                value = {email}\r\n                                onChange={(e)=>setEmail(e.target.value)}\r\n                            />\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n                        <div className=\"mb-6\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"password\">\r\n                                Password\r\n                            </label>\r\n                            <input \r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\" \r\n                                id=\"password\" \r\n                                type=\"password\" \r\n                                placeholder=\"******************\"\r\n                                value={password}\r\n                                onChange={(e)=>{setPassword(e.target.value)}}\r\n                            />\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-center\">\r\n                            <button \r\n                                className={`w-full ${loading?'bg-gray-300':'bg-blue-500 hover:bg-blue-700'}  text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`}\r\n                                type=\"submit\"\r\n\r\n                            >\r\n                                {loading?<>Signing in...</>:<>Sign In</>}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\nLogin.propTypes = {\r\n    setToken: PropTypes.func.isRequired\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}