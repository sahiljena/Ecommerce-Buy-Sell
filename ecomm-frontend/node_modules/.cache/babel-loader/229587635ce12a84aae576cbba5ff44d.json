{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\src\\\\pages\\\\NewListing.js\",\n    _s = $RefreshSig$();\n\nimport { func } from \"prop-types\";\nimport React, { useState } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NewListing = _ref => {\n  _s();\n\n  let {\n    token,\n    setToken\n  } = _ref;\n  const navigate = useNavigate();\n  const [pName, setPName] = useState('');\n  const [productImage, setProductImage] = useState('');\n  const [category, setCategory] = useState('');\n  const [description, setDescription] = useState('');\n  const [expPrice, setExpPrice] = useState('');\n  const [age, setAge] = useState('');\n  const [imagePreview, setImagePreview] = useState('');\n  const [laoding, setLoading] = useState(false);\n  const [status, setStatus] = useState('');\n  const [uploadedImg, setUploadedImg] = useState(\"\");\n\n  if (!token) {\n    return navigate('/login');\n  }\n\n  const handleProductAdd = event => {\n    event.preventDefault();\n    setLoading(true);\n    console.log(uploadedImg); //console.log(token)\n\n    if (pName && productImage && category && description && expPrice && age) {\n      fetch('http://localhost:5000/api/listing/new', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title: pName,\n          category: category,\n          description: description,\n          expectedPrice: expPrice,\n          productAge: age,\n          productImg: uploadedImg\n        })\n      }).then(function (response) {\n        return response.json();\n      }) //Then with the data from the response in JSON...\n      .then(data => {\n        return console.log('Success:', data);\n      }) //Then with the error genereted...\n      .catch(error => {\n        console.error('Error:', error);\n      });\n      setLoading(false);\n      setStatus('Posting AD...');\n    } else {\n      setLoading(false);\n      setStatus('All the fields are required.');\n    }\n  };\n\n  const handleProductImageChange = async event => {\n    setLoading(true);\n    setImagePreview(URL.createObjectURL(event.target.files[0]));\n    setProductImage(event.target.files[0]);\n    let formData = new FormData();\n    formData.append(\"productImg\", event.target.files[0]);\n    console.log(formData);\n    const resp = await fetch('http://localhost:5000/api/listing/newImg', {\n      method: 'POST',\n      headers: {\n        // 'Content-Type': 'multipart/form-data',\n        'Authorization': `Bearer ${token}`\n      },\n      body: formData\n    });\n    const img = await resp.json();\n    setUploadedImg(img.uploaded_img);\n    console.log(img.uploaded_img);\n    console.log(uploadedImg);\n    setLoading(false);\n    return uploadedImg; // .then((data)=>{\n    //     return data.json()\n    // })\n    // .then((j)=>{\n    //     //console.log(j);\n    //     //console.log(JSON.stringify(j));\n    //     setUploadedImg(JSON.stringify(j));\n    //     console.log(\"Inside THEN\",uploadedImg);\n    //     return \"IMAGE UPLOADED\"\n    // })\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      setToken: setToken,\n      token: token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mt-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"w-full max-w-xl\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleProductAdd,\n          className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n          enctype: \"multipart/form-data\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4 text-center text-lg font-bold text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Add a new product to sell.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-bold tracking-tight text-gray-500 mb-2\",\n              for: \"pname\",\n              children: \"Product Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n              id: \"pname\",\n              type: \"text\",\n              placeholder: \"Product Name\",\n              value: pName,\n              onChange: e => setPName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-xs italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-bold tracking-tight text-gray-500 mb-2\",\n              for: \"category\",\n              children: \"Product Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => {\n                setCategory(e.target.value);\n              },\n              name: \"category\",\n              id: \"category\",\n              className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                selected: true,\n                value: category,\n                children: \" -- select an option -- \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"mobile\",\n                children: \"Mobile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"laptop\",\n                children: \"Laptop\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Books\",\n                children: \"Book\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-xs italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-bold tracking-tight text-gray-500 mb-2\",\n              for: \"description\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: description,\n              onChange: e => {\n                setDescription(e.target.value);\n              },\n              className: \" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-xs italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-bold tracking-tight text-gray-500 mb-2\",\n              for: \"expPrice\",\n              children: \"Expected Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n              id: \"expPrice\",\n              type: \"number\",\n              placeholder: \"Rs1000\",\n              value: expPrice,\n              onChange: e => setExpPrice(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-xs italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-bold tracking-tight text-gray-500 mb-2\",\n              for: \"age\",\n              children: \"How old is your product?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n              id: \"age\",\n              type: \"number\",\n              placeholder: \"10 yrs old\",\n              value: age,\n              onChange: e => setAge(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-xs italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"m-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"inline-block mb-2 text-gray-500\",\n                children: \"Add product image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center w-full\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex flex-col w-full h-32 border-4 border-blue-200 border-dashed hover:bg-gray-100 hover:border-gray-300\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col items-center justify-center pt-7\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      className: \"w-8 h-8 text-gray-400 group-hover:text-gray-600\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      stroke: \"currentColor\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600\",\n                      children: \"Attach a file\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    className: \"opacity-0\",\n                    onChange: handleProductImageChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 33\n              }, this), imagePreview ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"w-full p-2 rounded lg:w-1/3 md:w-1/3 md:h-1/5\",\n                  src: imagePreview\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"underline decoration-dashed text-red-600\",\n                  onClick: () => {\n                    setProductImage('');\n                    setImagePreview('');\n                  },\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 47\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-full bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n              type: \"submit\",\n              disabled: laoding,\n              children: laoding ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: \"Please wait ...\"\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: \"Post\"\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(NewListing, \"hZ5MOe45ckOm4DjmukfTRl5xsM8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = NewListing;\nexport default NewListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewListing\");","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Desktop/olx-clone/ecomm-frontend/src/pages/NewListing.js"],"names":["func","React","useState","Navbar","useNavigate","NewListing","token","setToken","navigate","pName","setPName","productImage","setProductImage","category","setCategory","description","setDescription","expPrice","setExpPrice","age","setAge","imagePreview","setImagePreview","laoding","setLoading","status","setStatus","uploadedImg","setUploadedImg","handleProductAdd","event","preventDefault","console","log","fetch","method","headers","body","JSON","stringify","title","expectedPrice","productAge","productImg","then","response","json","data","catch","error","handleProductImageChange","URL","createObjectURL","target","files","formData","FormData","append","resp","img","uploaded_img","e","value"],"mappings":"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","sourcesContent":["import { func } from \"prop-types\";\r\nimport React,{useState} from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst NewListing = ({token, setToken}) =>{\r\n\r\n    const navigate = useNavigate();\r\n\r\n    \r\n\r\n\r\n    const [pName, setPName] = useState('');\r\n    const [productImage, setProductImage] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [expPrice, setExpPrice] = useState('');\r\n    const [age, setAge] = useState('');\r\n    const [imagePreview, setImagePreview] = useState('');\r\n\r\n    const [laoding, setLoading] = useState(false);\r\n    const [status, setStatus] = useState('');\r\n\r\n    const[uploadedImg, setUploadedImg] = useState(\"\");\r\n\r\n    if(!token){\r\n        return navigate('/login');\r\n    }\r\n\r\n    const handleProductAdd = (event) =>{\r\n        event.preventDefault();\r\n        setLoading(true);\r\n        console.log(uploadedImg);\r\n        //console.log(token)\r\n        if(pName&&productImage&&category&&description&&expPrice&&age){\r\n\r\n            \r\n\r\n            \r\n            \r\n\r\n            fetch('http://localhost:5000/api/listing/new',{\r\n                method:'POST',\r\n                headers:{\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization':`Bearer ${token}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    title:pName,\r\n                    category:category,\r\n                    description:description,\r\n                    expectedPrice:expPrice,\r\n                    productAge:age,\r\n                    productImg:uploadedImg,\r\n                })\r\n            })\r\n            .then(function (response) {\r\n                return response.json();\r\n            })\r\n            //Then with the data from the response in JSON...\r\n            .then((data) => {\r\n                return console.log('Success:', data);\r\n            })\r\n            //Then with the error genereted...\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n            });\r\n\r\n            setLoading(false);\r\n            setStatus('Posting AD...');\r\n        }else{\r\n            setLoading(false);\r\n            setStatus('All the fields are required.')\r\n        }\r\n    }\r\n\r\n    const handleProductImageChange = async (event) => {\r\n        setLoading(true)\r\n        setImagePreview(URL.createObjectURL(event.target.files[0]));\r\n        setProductImage(event.target.files[0]);\r\n        let formData = new FormData();\r\n\r\n        formData.append(\"productImg\",event.target.files[0]);\r\n        console.log(formData)\r\n        const resp = await fetch('http://localhost:5000/api/listing/newImg',{\r\n                                method:'POST',\r\n                                headers:{\r\n                                    // 'Content-Type': 'multipart/form-data',\r\n                                    'Authorization':`Bearer ${token}`,\r\n                                },\r\n                                body: formData,\r\n                            })\r\n        const img = await resp.json();\r\n        setUploadedImg(img.uploaded_img);\r\n        console.log(img.uploaded_img);\r\n        console.log(uploadedImg);\r\n        setLoading(false);\r\n        return uploadedImg;\r\n            // .then((data)=>{\r\n            //     return data.json()\r\n            // })\r\n            // .then((j)=>{\r\n            //     //console.log(j);\r\n            //     //console.log(JSON.stringify(j));\r\n            //     setUploadedImg(JSON.stringify(j));\r\n            //     console.log(\"Inside THEN\",uploadedImg);\r\n            //     return \"IMAGE UPLOADED\"\r\n            // })\r\n            \r\n\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <>\r\n            <Navbar setToken={setToken} token={token} />\r\n            <div className='flex justify-center mt-10'>\r\n\r\n                <div class=\"w-full max-w-xl\">\r\n\r\n                    <form onSubmit={handleProductAdd} className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" enctype=\"multipart/form-data\">\r\n\r\n                        <div className='mb-4 text-center text-lg font-bold text-gray-600'>\r\n                            <h2>Add a new product to sell.</h2>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"pname\">\r\n                                Product Name\r\n                            </label>\r\n                            <input \r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" \r\n                                id=\"pname\" \r\n                                type=\"text\" \r\n                                placeholder=\"Product Name\"\r\n                                value = {pName}\r\n                                onChange={(e)=>setPName(e.target.value)}\r\n                            />\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"category\">\r\n                                Product Category\r\n                            </label>\r\n                            <select  onChange={(e)=>{setCategory(e.target.value)}} name=\"category\" id=\"category\" className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\">\r\n                                <option disabled selected value={category}> -- select an option -- </option>\r\n                                <option value=\"mobile\">Mobile</option>\r\n                                <option value=\"laptop\">Laptop</option>\r\n                                <option value=\"Books\">Book</option>\r\n                            </select>\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"description\">\r\n                                Description\r\n                            </label>\r\n                            <textarea value={description} onChange={(e)=>{setDescription(e.target.value)}} className=\" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"></textarea>\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"expPrice\">\r\n                                Expected Price \r\n                            </label>\r\n                            <input \r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" \r\n                                id=\"expPrice\" \r\n                                type=\"number\" \r\n                                placeholder=\"Rs1000\"\r\n                                value = {expPrice}\r\n                                onChange={(e)=>setExpPrice(e.target.value)}\r\n                            />\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-sm font-bold tracking-tight text-gray-500 mb-2\" for=\"age\">\r\n                                How old is your product? \r\n                            </label>\r\n                            <input \r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" \r\n                                id=\"age\" \r\n                                type=\"number\" \r\n                                placeholder=\"10 yrs old\"\r\n                                value = {age}\r\n                                onChange={(e)=>setAge(e.target.value)}\r\n                            />\r\n                            <p className=\"text-red-500 text-xs italic\"></p>\r\n                        </div>\r\n\r\n                        \r\n\r\n                        <br />\r\n                        \r\n                        <div className=\"max-w-2xl rounded-lg\">\r\n                            <div className=\"m-4\">\r\n                                <label className=\"inline-block mb-2 text-gray-500\">Add product image</label>\r\n                                <div className=\"flex items-center justify-center w-full\">\r\n                                <label className=\"flex flex-col w-full h-32 border-4 border-blue-200 border-dashed hover:bg-gray-100 hover:border-gray-300\">\r\n                                    <div className=\"flex flex-col items-center justify-center pt-7\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400 group-hover:text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                                    </svg>\r\n                                    <p className=\"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600\">\r\n                                        Attach a file</p>\r\n                                    </div>\r\n                                    <input type=\"file\" className=\"opacity-0\" \r\n                                    onChange={handleProductImageChange} \r\n                                    />\r\n                                </label>\r\n                                </div>\r\n                                {imagePreview?<div className=\"mb-4\">\r\n                                    <img className=\"w-full p-2 rounded lg:w-1/3 md:w-1/3 md:h-1/5\" src={imagePreview} />\r\n                                    <br />\r\n                                    <button className=\"underline decoration-dashed text-red-600\" onClick={()=>{setProductImage('');setImagePreview('');}}>Remove</button>\r\n                                </div>:<></>}\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <div className=\"flex items-center justify-center\">\r\n                            <button \r\n                                className=\"w-full bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" \r\n                                type=\"submit\"\r\n                                disabled={laoding}\r\n                            >\r\n                                {laoding?<>Please wait ...</>:<>Post</>}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default NewListing;"]},"metadata":{},"sourceType":"module"}