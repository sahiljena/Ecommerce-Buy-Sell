{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import Navbar from'../components/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Searchbar=function Searchbar(_ref){var token=_ref.token;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),listings=_useState6[0],setListings=_useState6[1];var fetchListings=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var endpoint,response,tours;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);endpoint=\"https://ecomm-backend-xcv34.herokuapp.com/api/listings/search?q=\".concat(query);_context.prev=2;_context.next=5;return fetch(endpoint);case 5:response=_context.sent;_context.next=8;return response.json();case 8:tours=_context.sent;console.log(tours);setLoading(false);setListings(tours);_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);setLoading(false);console.log(\"Error Occured\");console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function fetchListings(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!token){return navigate('/login');}},[token]);var handleSearch=function handleSearch(e){setQuery(e.target.value);console.log(e.target.value);if(query.length>2){fetchListings();}};var handleBackSpace=function handleBackSpace(e){if(e.keyCode===8){setListings([]);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-2 rounded sticky top-0\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"px-4 py-2 w-full md:w-auto outline-0\",placeholder:\"Search...\",onChange:handleSearch,value:query,onKeyDown:handleBackSpace}),/*#__PURE__*/_jsx(\"button\",{className:\"flex items-center justify-center px-4 border-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-gray-500\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-visible h-0 z-10\",children:listings&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-100 px-2 py-2\",children:listings&&listings.map(function(data){return/*#__PURE__*/_jsx(\"a\",{href:\"/item/\".concat(data._id),children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto flex mt-4 rounded bg-gray-200 text-gray-600 px-4 py-4 w-80\",children:data.title})});})})})]})});};export default Searchbar;","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Desktop/olx-clone/ecomm-frontend/src/components/Searchbar.js"],"names":["React","useState","useEffect","useNavigate","Navbar","Searchbar","token","navigate","query","setQuery","loading","setLoading","listings","setListings","fetchListings","endpoint","fetch","response","json","tours","console","log","handleSearch","e","target","value","length","handleBackSpace","keyCode","map","data","_id","title"],"mappings":"6cAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,C,6IAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAY,IAAVC,CAAAA,KAAU,MAAVA,KAAU,CAE1B,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CAEA,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA8BR,QAAQ,CAAC,KAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAAgCV,QAAQ,CAAC,EAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,aAAa,2FAAG,+JAClBH,UAAU,CAAC,IAAD,CAAV,CACII,QAFc,2EAEgEP,KAFhE,wCAISQ,CAAAA,KAAK,CAACD,QAAD,CAJd,QAIRE,QAJQ,qCAKMA,CAAAA,QAAQ,CAACC,IAAT,EALN,QAKRC,KALQ,eAMdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACAR,UAAU,CAAC,KAAD,CAAV,CACAE,WAAW,CAACM,KAAD,CAAX,CARc,iFAUdR,UAAU,CAAC,KAAD,CAAV,CACAS,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAD,OAAO,CAACC,GAAR,cAZc,qEAAH,kBAAbP,CAAAA,aAAa,2CAAnB,CAeAZ,SAAS,CAAC,UAAM,CACZ,GAAG,CAACI,KAAJ,CAAU,CACN,MAAQC,CAAAA,QAAQ,CAAC,QAAD,CAAhB,CACH,CACJ,CAJQ,CAIN,CAACD,KAAD,CAJM,CAAT,CAMA,GAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAM,CACvBd,QAAQ,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CACAL,OAAO,CAACC,GAAR,CAAYE,CAAC,CAACC,MAAF,CAASC,KAArB,EACA,GAAGjB,KAAK,CAACkB,MAAN,CAAa,CAAhB,CAAkB,CACdZ,aAAa,GAChB,CAEJ,CAPD,CAQA,GAAMa,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACJ,CAAD,CAAM,CAC1B,GAAGA,CAAC,CAACK,OAAF,GAAc,CAAjB,CAAmB,CACff,WAAW,CAAC,EAAD,CAAX,CACH,CACJ,CAJD,CAMA,mBACI,sCACA,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,oCAAf,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,sCAA7B,CAAoE,WAAW,CAAC,WAAhF,CAA4F,QAAQ,CAAES,YAAtG,CAAoH,KAAK,CAAEd,KAA3H,CAAkI,SAAS,CAAEmB,eAA7I,EADJ,cAEI,eAAQ,SAAS,CAAC,gDAAlB,uBACI,YAAK,SAAS,CAAC,uBAAf,CAAuC,IAAI,CAAC,cAA5C,CAA2D,KAAK,CAAC,4BAAjE,CAA8F,OAAO,CAAC,WAAtG,uBACA,aAAM,CAAC,CAAC,8GAAR,EADA,EADJ,EAFJ,GADJ,cASI,YAAK,SAAS,CAAC,2BAAf,UACKf,QAAQ,eAAI,YAAK,SAAS,CAAC,wBAAf,UACZA,QAAQ,EAAIA,QAAQ,CAACiB,GAAT,CAAa,SAACC,IAAD,CAAQ,CAC9B,mBAAM,UAAG,IAAI,iBAAWA,IAAI,CAACC,GAAhB,CAAP,uBAA8B,YAAK,SAAS,CAAC,0EAAf,UAA2FD,IAAI,CAACE,KAAhG,EAA9B,EAAN,CACH,CAFY,CADA,EADjB,EATJ,GADA,EADJ,CAsBH,CAjED,CAmEA,cAAe3B,CAAAA,SAAf","sourcesContent":["import React,{useState,  useEffect} from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from '../components/Navbar';\r\n\r\nconst Searchbar = ({token}) =>{\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [query, setQuery] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [listings, setListings] = useState([]);\r\n\r\n    const fetchListings = async () =>{\r\n        setLoading(true)\r\n        var endpoint = `https://ecomm-backend-xcv34.herokuapp.com/api/listings/search?q=${query}`\r\n        try{\r\n            const response = await fetch(endpoint)\r\n            const tours = await response.json()\r\n            console.log(tours)\r\n            setLoading(false)\r\n            setListings(tours)\r\n        } catch(error){\r\n            setLoading(false)\r\n            console.log(\"Error Occured\");\r\n            console.log(error);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if(!token){\r\n            return (navigate('/login'));\r\n        }\r\n    }, [token])\r\n\r\n    const handleSearch = (e) =>{\r\n        setQuery(e.target.value);\r\n        console.log(e.target.value);\r\n        if(query.length>2){\r\n            fetchListings();\r\n        }\r\n        \r\n    }\r\n    const handleBackSpace = (e) =>{\r\n        if(e.keyCode === 8){\r\n            setListings([]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"flex flex-col\">\r\n            <div className=\"flex border-2 rounded sticky top-0\">\r\n                <input type=\"text\" className=\"px-4 py-2 w-full md:w-auto outline-0\" placeholder=\"Search...\" onChange={handleSearch} value={query} onKeyDown={handleBackSpace} />\r\n                <button className=\"flex items-center justify-center px-4 border-0\">\r\n                    <svg className=\"w-6 h-6 text-gray-500\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n                    <path d=\"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z\" />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"overflow-visible h-0 z-10\">\r\n                {listings && <div className=\"bg-slate-100 px-2 py-2\">\r\n                {listings && listings.map((data)=>{\r\n                    return<a href={`/item/${data._id}`}><div className=\"overflow-auto flex mt-4 rounded bg-gray-200 text-gray-600 px-4 py-4 w-80\">{data.title}</div></a>\r\n                })}\r\n                </div>}\r\n            </div>\r\n        </div>\r\n        \r\n        </> \r\n    );\r\n}\r\n\r\nexport default Searchbar;"]},"metadata":{},"sourceType":"module"}