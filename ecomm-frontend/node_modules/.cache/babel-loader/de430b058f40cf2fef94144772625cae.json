{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\olx-clone\\\\ecomm-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import Navbar from\"../components/Navbar\";import{useNavigate}from\"react-router-dom\";import Product from'../components/Productcard';import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductPage=function ProductPage(_ref){var token=_ref.token,setToken=_ref.setToken;var params=useParams();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listings=_useState4[0],setListings=_useState4[1];var fetchListings=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var endpoint,response,tours;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);endpoint=\"http://localhost:5000/api/listings/find?id=\".concat(params.id);_context.prev=2;_context.next=5;return fetch(endpoint);case 5:response=_context.sent;_context.next=8;return response.json();case 8:tours=_context.sent;setLoading(false);setListings(tours);console.log(tours);_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);setLoading(false);console.log(\"Error Occured\");console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function fetchListings(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!token){return navigate('/login');}fetchListings();},[token]);// if(listings.length===1){\n//     document.title = `${listings[0].title} - Rs ${listings[0].expectedPrice}`\n// }\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid justify-items-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center text-xl\",children:\"Loading..\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"this might take a few minutes\"})]})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{setToken:setToken,token:token}),listings&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm py-3 px-6 text-gray-600 pt-6\",children:[\"../\",listings.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[listings[0].title,\" - Rs. \",listings[0].expectedPrice]}):/*#__PURE__*/_jsx(_Fragment,{})]}),listings.length>0?/*#__PURE__*/_jsx(\"div\",{class:\"px-5 md:py-5 md:mt-10 pb-10\",children:listings.map(function(data){console.log(data);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Product,{type:\"full\",nav:data._id,img:data.prodcutImg,title:data.title,description:data.description,price:data.expectedPrice,old:data.productAge})});})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xl px-5 py-5 mt-30 text-center\",children:\":( Nothing to show!\"})]});};export default ProductPage;","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Desktop/olx-clone/ecomm-frontend/src/pages/Productpage.js"],"names":["React","useState","useEffect","Navbar","useNavigate","Product","useParams","ProductPage","token","setToken","params","navigate","loading","setLoading","listings","setListings","fetchListings","endpoint","id","fetch","response","json","tours","console","log","length","title","expectedPrice","map","data","_id","prodcutImg","description","productAge"],"mappings":"6cAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,OAASC,SAAT,KAA0B,kBAA1B,C,6IAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAuB,IAArBC,CAAAA,KAAqB,MAArBA,KAAqB,CAAbC,QAAa,MAAbA,QAAa,CACvC,GAAMC,CAAAA,MAAM,CAAGJ,SAAS,EAAxB,CACA,GAAMK,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAEA,cAA8BH,QAAQ,CAAC,KAAD,CAAtC,wCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,aAAa,2FAAG,+JAClBH,UAAU,CAAC,IAAD,CAAV,CACII,QAFc,sDAE2CP,MAAM,CAACQ,EAFlD,wCAISC,CAAAA,KAAK,CAACF,QAAD,CAJd,QAIRG,QAJQ,qCAKMA,CAAAA,QAAQ,CAACC,IAAT,EALN,QAKRC,KALQ,eAMdT,UAAU,CAAC,KAAD,CAAV,CACAE,WAAW,CAACO,KAAD,CAAX,CACAC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EARc,iFAUdT,UAAU,CAAC,KAAD,CAAV,CACAU,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAD,OAAO,CAACC,GAAR,cAZc,qEAAH,kBAAbR,CAAAA,aAAa,2CAAnB,CAeAd,SAAS,CAAC,UAAM,CACZ,GAAG,CAACM,KAAJ,CAAU,CACN,MAAQG,CAAAA,QAAQ,CAAC,QAAD,CAAhB,CACH,CACDK,aAAa,GAChB,CALQ,CAKN,CAACR,KAAD,CALM,CAAT,CAOA;AACA;AACA;AACA,GAAGI,OAAH,CAAW,CACP,mBACI,YAAK,SAAS,CAAC,iDAAf,uBACI,oCACI,WAAI,SAAS,CAAC,qBAAd,uBADJ,cAEI,UAAG,SAAS,CAAC,SAAb,2CAFJ,GADJ,EADJ,CAQH,CACD,mBACI,wCACA,KAAC,MAAD,EAAQ,QAAQ,CAAEH,QAAlB,CAA4B,KAAK,CAAED,KAAnC,EADA,CAECM,QAAQ,eAAI,cAAM,SAAS,CAAC,sCAAhB,iBAA2DA,QAAQ,CAACW,MAAT,CAAgB,CAAhB,cAAkB,2BAAGX,QAAQ,CAAC,CAAD,CAAR,CAAYY,KAAf,WAA6BZ,QAAQ,CAAC,CAAD,CAAR,CAAYa,aAAzC,GAAlB,cAA8E,kBAAzI,GAFb,CAGCb,QAAQ,CAACW,MAAT,CAAgB,CAAhB,cAAkB,YAAK,KAAK,CAAC,6BAAX,UAEXX,QAAQ,CAACc,GAAT,CAAa,SAACC,IAAD,CAAQ,CACjBN,OAAO,CAACC,GAAR,CAAYK,IAAZ,EACA,mBAAO,sCACH,KAAC,OAAD,EAAS,IAAI,CAAC,MAAd,CAAqB,GAAG,CAAEA,IAAI,CAACC,GAA/B,CAAoC,GAAG,CAAED,IAAI,CAACE,UAA9C,CAA0D,KAAK,CAAEF,IAAI,CAACH,KAAtE,CAA6E,WAAW,CAAEG,IAAI,CAACG,WAA/F,CAA4G,KAAK,CAAEH,IAAI,CAACF,aAAxH,CAAuI,GAAG,CAAEE,IAAI,CAACI,UAAjJ,EADG,EAAP,CAGH,CALD,CAFW,EAAlB,cASM,YAAK,SAAS,CAAC,qCAAf,iCAZP,GADJ,CAgBH,CA1DD,CA2DA,cAAe1B,CAAAA,WAAf","sourcesContent":["import React,{useState,  useEffect} from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Product from '../components/Productcard';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n\r\nconst ProductPage = ({token , setToken}) =>{\r\n    const params = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [listings, setListings] = useState([]);\r\n\r\n    const fetchListings = async () =>{\r\n        setLoading(true)\r\n        var endpoint = `http://localhost:5000/api/listings/find?id=${params.id}`\r\n        try{\r\n            const response = await fetch(endpoint)\r\n            const tours = await response.json()\r\n            setLoading(false)\r\n            setListings(tours)\r\n            console.log(tours)\r\n        } catch(error){\r\n            setLoading(false)\r\n            console.log(\"Error Occured\");\r\n            console.log(error);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if(!token){\r\n            return (navigate('/login'));\r\n        }\r\n        fetchListings()\r\n    }, [token])\r\n\r\n    // if(listings.length===1){\r\n    //     document.title = `${listings[0].title} - Rs ${listings[0].expectedPrice}`\r\n    // }\r\n    if(loading){\r\n        return (\r\n            <div className=\"grid justify-items-center items-center h-screen\">\r\n                <div>\r\n                    <h3 className=\"text-center text-xl\">Loading..</h3>\r\n                    <p className=\"text-sm\">this might take a few minutes</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return(\r\n        <>\r\n        <Navbar setToken={setToken} token={token} />\r\n        {listings && <span className=\"text-sm py-3 px-6 text-gray-600 pt-6\">../{listings.length>0?<>{listings[0].title} - Rs. {listings[0].expectedPrice}</> :<></>}</span>}\r\n        {listings.length>0?<div class=\"px-5 md:py-5 md:mt-10 pb-10\">\r\n            {\r\n                listings.map((data)=>{\r\n                    console.log(data);\r\n                    return <>\r\n                        <Product type=\"full\" nav={data._id} img={data.prodcutImg} title={data.title} description={data.description} price={data.expectedPrice} old={data.productAge} />\r\n                    </>\r\n                })\r\n            }\r\n        </div>:<div className=\"text-xl px-5 py-5 mt-30 text-center\">:( Nothing to show!</div>}\r\n        </>\r\n    );\r\n}\r\nexport default ProductPage"]},"metadata":{},"sourceType":"module"}